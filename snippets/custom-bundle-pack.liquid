<div class="bundle-selector">
  <h3 class="bundle-title">- Bundle promotion is valid till 11:59 PM -</h3>

  {% assign base_price = product.price %}
  {% assign compare_price = product.compare_at_price %}
  {% assign discounts = '0,0.10,0.15' | split: ',' %}
  {% assign labels = 'Standard Price,10% extra discount on the total order!,15% extra discount on the total order!'
    | split: ','
  %}

  {% for i in (1..3) %}
    {% assign discount = discounts[i-1] | times: 1.0 %}
    {% assign total_price = base_price | times: i %}
    {% assign discount_amount = total_price | times: discount %}
    {% assign discounted_price = total_price | minus: discount_amount %}
    {% assign label = labels[i-1] %}

    <div class="bundle-option {% if i == 1 %}active{% endif %}" data-tier="{{ i }}">
      <label class="bundle-header">
        <input
          type="radio"
          name="bundle_option"
          value="{{ i }}"
          {% if i == 1 %}
            checked
          {% endif %}
        >
        <div class="custom-radio"></div>

        <div class="bundle-info">
          <div class="bundle-title-row">
            <strong>{{ i }} Pair</strong>

            {% if i == 2 %}
              <div class="tag-wrapper popular-wrapper">
                <span class="tag popular">MOST POPULAR!</span>
              </div>
            {% elsif i == 3 %}
              <div class="tag-wrapper best-wrapper">
                <span class="tag best">BEST DEAL</span>
              </div>
            {% endif %}
          </div>

          <div class="bundle-subtitle">{{ label }}</div>
        </div>

        <div class="bundle-price">
          <span class="price">Tk {{ discounted_price | money }}</span>
          <span class="compare">Tk {{ compare_price | times: i | money }}</span>
        </div>
      </label>

      <div class="variant-selectors">
        <div class="variant-inner">
          {% for j in (1..i) %}
            <div class="variant-row">
              <label>#{{ j }}</label>
              <div>
                {% for option in product.options_with_values %}
                  <div class="product-option">
                    <label for="option-{{ forloop.index0 }}">{{ option.name }}</label>
                    <select
                      id="option-{{ forloop.index0 }}"
                      name="options[{{ option.name }}]"
                      data-option-index="{{ forloop.index0 }}"
                    >
                      {% for value in option.values %}
                        <option
                          value="{{ value | escape }}"
                          {% if value == option.selected_value %}
                            selected
                          {% endif %}
                        >
                          {{ value | escape }}
                        </option>
                      {% endfor %}
                    </select>
                  </div>
                {% endfor %}
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
  {% endfor %}

  <button class="add-to-cart">ðŸ›’ Add to cart</button>
</div>
